{# Environment parameters. This object should only contain CONSTANTS #}

{% set basePath = app.request.baseUrl|replace({'/app.php': ''})|replace({'/app_dev.php': ''})|replace({'/app_test.php': ''}) %}

{# Normalize trailing slash: MacOS returns a trailing slash while linux based OSes do not #}
{% if basePath|last != '/' %}
    {% set basePath = basePath ~ '/' %}
{% endif %}

{% if basePath == '/' %}
    {% set basePath = null %}
{% endif %}

window.ENV = {
    name: '{{ app.environment }}',
    {% if app.request.secure %}
        hostname: 'https://{{ app.request.host }}',
        apiEndpoint: 'https://{{ app.request.host }}{{ app.request.baseUrl }}',
        basePath: 'https://{{ app.request.host }}/{{ basePath }}'
    {% else %}
        hostname: 'http://{{ app.request.host }}',
        apiEndpoint: 'http://{{ app.request.host }}{{ app.request.baseUrl }}',
        basePath: 'http://{{ app.request.host }}/{{ basePath }}'
    {% endif %}
};
