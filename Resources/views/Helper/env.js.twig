{# Environment parameters. This object should only contain CONSTANTS #}
{% set basePath = app.request.baseUrl|replace({'/app.php': ''})|replace({'/app_dev.php': ''})|replace({'/app_test.php': ''}) %}

{# Normalize trailing slash: MacOS returns a trailing slash while Linux based OSes do not #}
{% if basePath|last != '/' %}
    {% set basePath = basePath ~ '/' %}
{% endif %}

{% if basePath == '/' %}
    {% set basePath = null %}
{% endif %}

{% if app.request.secure  %}
    {% set protocol = 'https' %}
{% else %}
    {% set protocol = 'http' %}
{% endif %}

{% set hostname = protocol ~ '://' ~ app.request.host %}
{% set apiEndpoint = protocol ~ '://' ~ app.request.host ~ app.request.baseUrl ~ '/api' %}
{% set basePath = protocol ~ '://' ~ app.request.host  ~ '/' ~  basePath %}

window.ENV = {
    hostname: '{{ hostname }}',
    apiEndpoint: '{{ apiEndpoint }}',
    basePath: '{{ basePath }}',
    {# YUI app legacy constant #}
    appRoot: '{{ app.request.baseUrl }}/admin/launcher'
};
